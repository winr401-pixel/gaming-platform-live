<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Ace Pro - Sound & Music Edition</title>
    <style>
        body { margin: 0; background: #000; display: flex; justify-content: center; align-items: center; height: 100vh; font-family: 'Arial Black', sans-serif; overflow: hidden; }
        .game-wrapper { width: 360px; height: 95vh; border-radius: 25px; padding: 15px; background: radial-gradient(circle at center, #1a2a44 0%, #050a12 100%); border: 2px solid #334e7a; position: relative; display: flex; flex-direction: column; }

        /* ‡¶Æ‡¶æ‡¶≤‡ßç‡¶ü‡¶ø‡¶™‡ßç‡¶≤‡¶æ‡ßü‡¶æ‡¶∞ ‡¶¨‡¶æ‡¶∞ ‡¶ì ‡¶∂‡ßá‡¶ï ‡¶è‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® */
        .multiplier-bar { display: flex; justify-content: space-around; background: rgba(0,0,0,0.7); padding: 10px; border-radius: 20px; border: 1.5px solid gold; margin-bottom: 12px; transition: transform 0.2s; }
        .shake { animation: shake-anim 0.3s ease-in-out; border-color: #fff; box-shadow: 0 0 20px gold; }
        @keyframes shake-anim { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }

        .m-box { color: #555; font-size: 16px; font-weight: bold; transition: 0.3s; padding: 2px 10px; border-radius: 10px; }
        .m-box.active { color: #000; background: #ffdf00; box-shadow: 0 0 15px gold; transform: scale(1.1); }

        /* ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶è‡¶¨‡¶Ç ‡¶∏‡ßç‡¶≤‡¶ü */
        .slot-container { display: grid; grid-template-columns: repeat(5, 1fr); gap: 5px; background: #000; padding: 10px; height: 380px; border-radius: 12px; overflow: hidden; }
        .card { height: 88px; border-radius: 8px; display: flex; flex-direction: column; justify-content: center; align-items: center; position: relative; background: #fff; box-shadow: inset 0 -4px 0 #ccc; }
        .card.golden { background: linear-gradient(135deg, #ffdf00, #b8860b); box-shadow: 0 0 15px gold; border: 1.5px solid #fff; }
        .card.wild { background: radial-gradient(circle, #ff0000, #800000); color: gold !important; border: 2px solid gold; }
        .card .symbol { font-size: 38px; font-weight: 900; }
        .card .small-icon { position: absolute; top: 3px; left: 4px; font-size: 12px; }

        /* ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤ ‡¶¨‡¶æ‡¶ü‡¶® */
        .footer-controls { margin-top: auto; display: flex; justify-content: space-between; align-items: center; padding-bottom: 20px; }
        .bet-panel { background: #0a1526; border-radius: 20px; display: flex; align-items: center; padding: 5px 10px; border: 2px solid gold; height: 45px; }
        #spin-btn { width: 90px; height: 90px; border-radius: 50%; border: 4px solid #fff; background: radial-gradient(circle, #ffdf00, #ff8c00); box-shadow: 0 0 30px gold; font-size: 22px; font-weight: 900; color: #332200; cursor: pointer; transition: 0.1s; }
        #spin-btn:active { transform: scale(0.9); }
        .icon-btn { width: 50px; height: 50px; border-radius: 50%; background: #0a1526; border: 2px solid #2d4c7a; color: white; cursor: pointer; display: flex; justify-content: center; align-items: center; font-size: 22px; }
        .icon-btn.active { background: gold; color: black; border-color: #fff; }

        #win-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); display: none; flex-direction: column; justify-content: center; align-items: center; z-index: 1000; }
    </style>
</head>
<body onclick="startMusic()">

    <audio id="bg-music" loop>
        <source src="https://www.soundjay.com/misc/sounds/dream-01.mp3" type="audio/mpeg">
    </audio>
    <audio id="spin-sound">
        <source src="https://www.soundjay.com/mechanical/sounds/mechanical-clunk-1.mp3" type="audio/mpeg">
    </audio>
    <audio id="win-sound">
        <source src="https://www.soundjay.com/misc/sounds/bell-ringing-05.mp3" type="audio/mpeg">
    </audio>

    <div id="win-overlay">
        <h1 style="color: gold; font-size: 50px; margin: 0;">BIG WIN!</h1>
        <div id="win-amt-popup" style="color: white; font-size: 40px;">0.00</div>
    </div>

    <div class="game-wrapper">
        <div class="multiplier-bar" id="m-bar">
            <span class="m-box active" id="m1">x1</span><span class="m-box" id="m2">x2</span><span class="m-box" id="m3">x3</span><span class="m-box" id="m5">x5</span>
        </div>

        <div class="slot-container" id="machine"></div>

        <div style="display: flex; justify-content: space-between; padding: 10px; margin: 10px 0; background: rgba(0,0,0,0.4); border-radius: 10px;">
            <div><div style="font-size: 10px; color: #aaa;">BALANCE</div><div style="color: gold; font-weight: bold;" id="balance">2,000.00</div></div>
            <div style="text-align: right;"><div style="font-size: 10px; color: #aaa;">WIN</div><div style="color: gold; font-weight: bold;" id="win-txt">0.00</div></div>
        </div>

        <div class="footer-controls">
            <div class="bet-panel">
                <button style="background:none; border:none; color:gold; font-size:24px; cursor:pointer;" onclick="changeBet(-1)">-</button>
                <div id="bet-display" style="color: #fff; font-weight: bold; margin: 0 10px;">2.00</div>
                <button style="background:none; border:none; color:gold; font-size:24px; cursor:pointer;" onclick="changeBet(1)">+</button>
            </div>
            <button id="spin-btn" onclick="handleSpin()">JILI</button>
            <div style="display: flex; gap: 10px;">
                <button class="icon-btn" id="auto-btn" onclick="toggleAuto()">üîÑ</button>
                <button class="icon-btn" id="turbo-btn" onclick="toggleTurbo()">‚ö°</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script>
        const symbols = [{s:'A', c:'#000'}, {s:'K', c:'#d00'}, {s:'Q', c:'#000'}, {s:'J', c:'#d00'}, {s:'‚ô†', c:'#000'}, {s:'‚ô•', c:'#d00'}];
        let balance = 2000.0, currentBet = 2.0, spinning = false, turbo = false, auto = false, comboCount = 0;
        let musicStarted = false;

        function startMusic() {
            if (!musicStarted) {
                const bg = document.getElementById('bg-music');
                bg.volume = 0.3; // ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶Ü‡¶ì‡ßü‡¶æ‡¶ú
                bg.play();
                musicStarted = true;
            }
        }

        function init() {
            const container = document.getElementById('machine');
            container.innerHTML = '';
            for(let i=0; i<5; i++) {
                let reel = document.createElement('div');
                reel.id = `reel-${i}`; reel.className = 'reel';
                fill(reel); container.appendChild(reel);
            }
        }

        function fill(reel) {
            reel.innerHTML = '';
            for(let j=0; j<30; j++) {
                const sym = symbols[Math.floor(Math.random()*symbols.length)];
                const type = Math.random() > 0.9 ? 'golden' : Math.random() > 0.96 ? 'wild' : '';
                let card = document.createElement('div');
                card.className = `card ${type}`;
                card.style.color = type === 'wild' ? 'gold' : sym.c;
                card.innerHTML = `<span class="small-icon">${sym.s}</span><span class="symbol">${type==='wild'?'W':sym.s}</span>`;
                reel.appendChild(card);
            }
        }

        function handleSpin() {
            if(spinning || balance < currentBet) { auto = false; return; }
            spinning = true; balance -= currentBet;
            document.getElementById('balance').innerText = balance.toLocaleString();
            document.getElementById('spin-sound').play(); // ‡¶∏‡ßç‡¶™‡¶ø‡¶® ‡¶∏‡¶æ‡¶â‡¶®‡ßç‡¶°
            
            const spd = turbo ? 0.2 : 1.0;
            for(let i=0; i<5; i++) {
                let r = document.getElementById(`reel-${i}`);
                r.style.transition = `transform ${spd + (i*0.1)}s cubic-bezier(0.5, 0, 0.1, 1)`;
                r.style.transform = `translateY(-${20 * 93}px)`;
            }

            setTimeout(() => {
                for(let i=0; i<5; i++) {
                    let r = document.getElementById(`reel-${i}`);
                    r.style.transition = 'none'; r.style.transform = 'translateY(0)';
                    fill(r);
                }
                spinning = false;
                processWin();
                if(auto) setTimeout(handleSpin, 500);
            }, spd * 1000 + 400);
        }

        function processWin() {
            let winOccurred = Math.random() > 0.78;
            if(winOccurred) {
                const multis = [1, 2, 3, 5];
                let win = currentBet * multis[comboCount] * (Math.random()*2 + 1);
                balance += win;
                document.getElementById('win-txt').innerText = win.toFixed(2);
                document.getElementById('balance').innerText = balance.toLocaleString();
                document.getElementById('win-sound').play(); // ‡¶â‡¶á‡¶® ‡¶∏‡¶æ‡¶â‡¶®‡ßç‡¶°
                
                const bar = document.getElementById('m-bar');
                bar.classList.add('shake');
                setTimeout(() => bar.classList.remove('shake'), 300);
                
                if(win >= currentBet * 5) showBigWin(win);
                else confetti({ particleCount: 100, spread: 50, origin: { y: 0.8 } });

                if(comboCount < 3) comboCount++;
            } else {
                comboCount = 0;
            }
            ['m1','m2','m3','m5'].forEach((id, i) => document.getElementById(id).classList.toggle('active', i === comboCount));
        }

        function showBigWin(amt) {
            const overlay = document.getElementById('win-overlay');
            document.getElementById('win-amt-popup').innerText = amt.toFixed(2);
            overlay.style.display = 'flex';
            confetti({ particleCount: 300, spread: 100, origin: { y: 0.5 } });
            setTimeout(() => overlay.style.display = 'none', 2000);
        }

        function changeBet(v) {
            const b = [2, 5, 10, 20, 50, 100, 500];
            let i = b.indexOf(currentBet) + v;
            if(i>=0 && i<b.length) { currentBet = b[i]; document.getElementById('bet-display').innerText = currentBet.toFixed(2); }
        }

        function toggleTurbo() { turbo = !turbo; document.getElementById('turbo-btn').classList.toggle('active'); }
        function toggleAuto() { auto = !auto; document.getElementById('auto-btn').classList.toggle('active'); if(auto) handleSpin(); }

        init();
    </script>
</body>
</html>
